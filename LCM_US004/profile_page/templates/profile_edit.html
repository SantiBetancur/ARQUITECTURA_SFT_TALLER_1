{% extends 'profile_page.html' %}

{% load static %}
{% block content %}

<form method="POST" class="publish_fields" enctype="multipart/form-data" >
    {% csrf_token %}
    <p style="color: #ca4545; font-size: 20px; font-weight: bold;">{{form_error}}</p>
        <div style="display: flex; flex-direction: column; padding: 10px; border-radius: 10px; margin-bottom: 20px;  background-color:#ffffff36; align-items: center; width: 100%;">
            <p style="font-size: 25px; font-weight: bold; color: #fff;">Cuenta</p>
            <div class="form-group">
                <label for="form.username.id_for_label">Usuario</label>
                    {{form.username}}
            </div>
            <div class="form-group">
                <label for="form.email.id_for_label">Email</label>
                    {{form.email}}
            </div>
            <div class="form-group">
                <label for="form.email.id_for_label">Contraseña</label>
                    {{form.password}}
            </div>
            <div class="form-group">
                <label for="form.email.id_for_label">Confirma la contraseña</label>
                    {{form.password_confirmation}}
            </div>
        </div>


        <div class="submit-btn">
            {% csrf_token %}
            <input type = "button" value="Editar perfil" class="forms_submit" name="edit" id="edit-form" onclick="confirmEdit()">
            <button type="button" name="delete" onclick="confirmDelete()" id="delete-form">Eliminar Cuenta</button>
            <script>
                function confirmDelete() {
                    if (confirm("¿Estás seguro de que deseas eliminar tu cuenta? Esta acción no se puede deshacer.")) {
                        document.querySelector('[name="delete"]').type = 'submit';
                        document.getElementById("delete-form").submit();
                    }
                }

                function confirmEdit() {
                    if (confirm("Deberás volver a iniciar sesión, ¿deseas continuar?")) {
                        document.querySelector('[name="edit"]').type = 'submit';
                        document.getElementById("edit-form").submit();
                    }
                }

                
            </script>
        </div>    

</form>
{% endblock %}
